# 法官详情详细设计

## 一、需求描述

### 1.1 需求清单

 - 统计表中点击法官名称打开该法官的法官监管画像；
 - 法官监管画像显示内容：
   - 标题：法官监管画像；
   - 法官信息：法院、部门、姓名；
   - 画像统计信息：显示统计表选择的时间范围和案件类型，支持修改统计时间区间和统计案件类型。默认回填统计表的查询内容。
 - 指标
   - 显示指标名称、统计数据、部门排名、本院排名。
   - 指标跟统计表指标一致
### 1.2 使用场景

    对地区、法院、部门、法官的监管数据进行统计展示。
    对接人事系统，将法官的监管画像挂接到人事系统。




### 1.3 需求意义

    展示法官详情，给不同的用户展示

### 1.4 用例图

    ……

## 二、 功能点
 - 查询不同的数据源
 - 拼接查询条件和查询语句
 - 技术允许的话，可以优化一下查询

- 统计时间与案件类型

  - 前端维护开始时间、结束时间和统计案件类型的列表，在更改时将查询条件作为参数。

- 指标统计

 - 将法官的编号作为参数，条件查询（全量）法官的各项指标。
- 返回上级
  - 先从后端获取父亲结点信息，在将父亲结点编号作为参数调用监管画像的接口。

## 三、数据库设计


## 四、缓存设计

 无

## 五、业务流程控制

  无

## 六、复用设计
### 6.1 复用清单

无

### 6.2 被复用可行性
无

## 七、接口设计
> 自动生成的接口不用罗列，重点写和第三方系统对接的接口(包括接口设计方案)。

|           接口名称            |        接口地址         |    参数     |                          描述                          |
| :---------------------------: | :---------------------: | :---------: | :----------------------------------------------------: |
| selectJghxByConditions (POST) | /api/v1/jghx/conditions | JghxParamVO | 根据条件查询指标列表（法官id，统计时间，统计案件类型） |

##### selectJghxByConditions（拼接上其他数据源的查询结果）

uri：/api/v1/jghx/conditions

请求方式：POST

参数：

```json
{
    "bh": "ce54fpauid8sf0654dsd", 
    "kssj": "2020-01-01", 
    "jssj": "2023-01-01", 
    "ajlx": [
        "民事", 
        "刑事", 
        "行政"
    ], 
    "sort": "lcfxsl_desc", 
    "level": "1", 
    "zdyzb": [
        "lcfxsl", 
        "lcfxajsl"
    ]
}
```

返回结果：

```json
{
    "parentJghx": {
        "bh": "", 
        "name": ""
    }, 
    "currentJghx": {
        "bh": "", 
        "name": ""
    }, 
    "childrenJghx": [
        {
            "bh": "", 
            "name": "", 
            "pm": "", 
            "fgsl": "", 
            "ajsl": "", 
            "lcfxsl": "", 
            "lcfxajsl": ""
        }
    ], 
    "isTop": true, 
    "isBottom": false
}
```

